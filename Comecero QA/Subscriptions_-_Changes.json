{
  "info": {
    "_postman_id": "15fc375e-531c-41d0-b2d4-c1b7ed832e4e",
    "name": "Subscriptions - Changes",
    "description": "This set of tests expects you to be using the Base Account.",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "e249d914-1176-4db3-8c3c-f894365b80d1",
      "name": "Pre-request Configurations",
      "description": "",
      "item": [
        {
          "_postman_id": "b1e21aeb-a714-47ff-a05c-e23022efda24",
          "name": "Get Notification Subscriptions",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "09e78ddc-848e-4610-a39c-393e9d4f1259",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "// Find the payment, order notification subscriptions",
                  "var notifications = JSON.parse(responseBody);",
                  "var list = notifications.data;",
                  "",
                  "_.each(list, function(item) {",
                  "    ",
                  "    if (item.type === \"order:confirmation\")",
                  "        pm.globals.set(\"order_confirmation_subscription_url\", item.url);",
                  "        ",
                  "            if (item.type === \"payment:confirmation\")",
                  "        pm.globals.set(\"payment_confirmation_subscription_url\", item.url);",
                  "        ",
                  "            if (item.type === \"refund:confirmation\")",
                  "        pm.globals.set(\"refund_confirmation_subscription_url\", item.url);        ",
                  "    ",
                  "});",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/notification_subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "198a3de0-9b75-4b45-9623-f524dc6b0ce4",
          "name": "Disable Order Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ec320aec-60a1-416a-8184-2ebe91db1f38",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Order email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{order_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "fe766129-3a5e-4e03-abfd-4f2dd8bf1d69",
          "name": "Disable Payment Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "82452e4c-9550-4daa-8063-f5b84f40aee0",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{payment_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "462ebf98-b8e4-4b3b-b44e-da4cb082c475",
          "name": "Disable Refund Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "82452e4c-9550-4daa-8063-f5b84f40aee0",
                "exec": [
                  "tests[\"Refund email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{refund_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "7dc53f33-4609-4dd9-a7e7-63b7839c44ea",
          "name": "Get Subscription Plans",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Get subscription plans\"] = responseCode.code === 200;",
                  "",
                  "var list = JSON.parse(responseBody);",
                  "var data = list.data;",
                  "",
                  "data.forEach(function(item) {",
                  "    ",
                  "    if (item.billing_interval_unit === \"minute\" && item.trial_interval_unit === null) {",
                  "        pm.globals.set(\"five_minute_subscription_plan_id\", item.subscription_plan_id);",
                  "    }",
                  "    ",
                  "    if (item.billing_interval_unit === \"minute\" && item.trial_interval_unit === \"minute\") {",
                  "        pm.globals.set(\"five_minute_subscription_with_trial_plan_id\", item.subscription_plan_id);",
                  "    }",
                  "    ",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscription_plans",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "1f1acc42-d091-4d02-9306-3f86ba0200bd",
          "name": "Update Product Subscription Plan (Digital)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "22a5ee2b-0edb-4407-816c-2c8518d85dc8",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "db236e77-f986-4125-b356-5008a2e559a8",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "fa8477f9-7918-46af-8244-edb14f473d45",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "_postman_id": "43fb8e33-9ac3-4faf-b9e7-1f927a838c18",
      "name": "Quantity Change Up, Immediate",
      "description": "",
      "item": [
        {
          "_postman_id": "14b083c2-a1cc-483d-90a4-453f6f8a78c3",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "8c5158e8-38af-49fc-a1d4-f9d26d7b68e1",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "752a11b4-fc69-4293-ab14-8459c95d925f",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "6da33cf6-0155-4a74-a9a6-568a8853f050",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "af24adca-2be2-4ad5-9cbc-772391651d51",
          "name": "Change Item Quantity",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one subscription and the total should be less than the item total",
                  "tests[\"Change invoice was created\"] = data.subscription.invoices.total_items === 1;",
                  "tests[\"Invoice amount was pro-rated, total: \" + data.subscription.invoices.data[0].total] = data.subscription.invoices.data[0].total < pm.globals.get(\"item_total\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"quantity\": 2\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}?expand=subscription.invoices",
              "host": [
                "{{subscription_item_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "a465ba70-45fb-4543-9cdb-2dcb25d9c2c5",
          "name": "Change Item Quantity with Bad URL",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 404\"] = responseCode.code === 404;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"quantity\": 2\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}xxx?expand=subscription.invoices",
              "host": [
                "{{subscription_item_url}}xxx"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "4d7d365a-6285-49a5-b224-d2beb0502f9f",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "5dbe7b72-406a-47d1-bbec-6c008990bd99",
      "name": "Quantity Change Up, Period End",
      "description": "",
      "item": [
        {
          "_postman_id": "df7feea3-610d-4d50-9de1-52466115418e",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c0744ad5-22ff-4659-8b12-443d1b8f33e0",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "1d313a94-1b96-40b0-a643-3d73111f13c4",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "39398421-0b31-4023-9bf3-d6e204c83240",
          "name": "Change Item Quantity",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one subscription and the total should be less than the item total",
                  "tests[\"Change invoice was note created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Change request recorded\"] = data.quantity_change_at_current_period_end === 2;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"apply_at_period_end\": true,\n\t\"quantity\": 2\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}?expand=subscription.invoices",
              "host": [
                "{{subscription_item_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "be4d7a8f-0995-4a19-9d65-5147964c059e",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "1ff557c8-9dfb-4b26-ab1c-10d218bb02e9",
      "name": "Quantity Change Down, Immediate",
      "description": "",
      "item": [
        {
          "_postman_id": "d3c926a6-e875-41f3-b9c8-95034700849b",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "fa60297e-461b-45cb-8adf-c883bb3ed752",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b094ab05-b89f-422f-91d5-6bca082f254f",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b0e92f72-edde-4233-b36a-c20443f04cda",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b15b7cc6-a315-445f-a7c6-876eeea4b16b",
          "name": "Change Item Quantity",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one subscription and the total should be less than the item total",
                  "tests[\"No invoices were created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Refund was submited\"] = data.subscription.customer.refunds.total_items === 1;",
                  "tests[\"Refund was the expected amount, total: \" + data.subscription.customer.refunds.data[0].total] = data.subscription.customer.refunds.data[0].total < (pm.globals.get(\"item_total\") / 2);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"quantity\": 1\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}?expand=subscription.invoices,subscription.customer.refunds",
              "host": [
                "{{subscription_item_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices,subscription.customer.refunds",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "d15eec0b-dce6-4229-97a6-f790f80cde4a",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "335dc719-64fa-416a-a868-8377d2b3e9cc",
      "name": "Quantity Change Down, Period End",
      "description": "",
      "item": [
        {
          "_postman_id": "87485bbf-fd7b-4fa4-bd39-139b0141b969",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "3d3d0742-3a12-4f24-b12e-483df7f0e757",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "84ce2b69-83ea-4111-928b-1b399694fe03",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "aeee875c-568b-409c-9a4c-dafa9b6b22fe",
          "name": "Change Item Quantity",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one subscription and the total should be less than the item total",
                  "tests[\"Change invoice was not created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Change request recorded\"] = data.quantity_change_at_current_period_end === 1;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"apply_at_period_end\": true,\n\t\"quantity\": 1\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}?expand=subscription.invoices",
              "host": [
                "{{subscription_item_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c6191914-87cc-4c1c-8773-0ba89500fca2",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "28202a47-3039-4349-8069-aeefa47ed61e",
      "name": "Add Item, Immediate",
      "description": "",
      "item": [
        {
          "_postman_id": "ec7a2e8a-aa89-4a32-bad4-598128738a44",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "ec4d7b3e-32e3-4492-a44e-8f23c66f1f02",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "ef4dbffa-f563-4020-bd58-f3f9a22a6024",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "1392517c-384d-49a6-8e44-5401a4b80949",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c7c362ef-8d32-4981-88d9-c05d6133b340",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/physical-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "physical-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "4bc55a4d-e1ad-4fcf-baf5-95758a2f0ad9",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "72b3f66d-c093-4c4b-824c-6ffbf390cdb2",
          "name": "Add New Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"Change invoice was created\"] = data.subscription.invoices.total_items === 1;",
                  "tests[\"Invoice amount was pro-rated, subtotal: \" + data.subscription.invoices.data[0].subtotal] = data.subscription.invoices.data[0].subtotal < pm.globals.get(\"product_price\");",
                  "tests[\"Subscription has two items\"] = data.subscription.items.length === 2;",
                  "tests[\"Subscription has the added item\"] = _.find(data.subscription.items, function(item) {return item.item_id == 'physical-sub.test'}) !== undefined;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"product_id\": \"physical-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "a976949b-8cbf-4711-944d-3dffd3796b90",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "0c6840a1-19dd-4404-9dee-05a0c3aed82f",
          "name": "Add Item with Bad product_id",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 404\"] = responseCode.code === 404;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"product_id\": \"xxx\"\n}"
            },
            "url": {
              "raw": "{{subscription_item_url}}xxx?expand=subscription.invoices",
              "host": [
                "{{subscription_item_url}}xxx"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "e4842d39-9eec-41b3-afb2-24cc6029e7a1",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "1447dbde-8fc7-4a1f-8471-ba2c046b6970",
      "name": "Add Item, Period End",
      "description": "",
      "item": [
        {
          "_postman_id": "3fc174a6-ca6f-461a-8197-e5bc29531fc8",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b9559195-f044-4c82-b9a6-275f8fc06bc1",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c2e5e45e-0a2c-47b7-a603-84ec803a1b24",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "f5f64b85-c1d7-4042-bc85-d208c27f8900",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "4653893e-c527-4932-9e61-f8bb1d084910",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/physical-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "physical-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "69ef8052-7a0d-44d4-bc92-65e35ee67b94",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "cbdc995c-29f9-49d1-99f6-26af56cf69e9",
          "name": "Add New Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"No invoice was created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Subscription has one item\"] = data.subscription.items.length === 1;",
                  "tests[\"Subscription has new item pending\"] = data.subscription.add_at_current_period_end.length === 1;",
                  "tests[\"Subscription has the correct item pending\"] = _.find(data.subscription.add_at_current_period_end, function(item) {return item.item_id == 'physical-sub.test'}) !== undefined;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"apply_at_period_end\": true,\n\t\"product_id\": \"physical-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "5b204998-abc2-4d3a-bb43-dde292b904c7",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "4e73daf8-33ee-46d9-8b37-2a6c41ab1128",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "24acd2da-6b1d-4e8d-939f-f4d80668bc0e",
      "name": "Replace Item, Immediate, Same Plan, Upgrade",
      "description": "",
      "item": [
        {
          "_postman_id": "7222f7b9-cec3-4439-be2d-f4fb410a811d",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "93e33568-bdd8-4b23-bacc-f541fbe315e7",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "da9abdd2-4c6a-4098-84f8-aad337a0344b",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);",
                  "pm.globals.set(\"customer_url\", data.customer);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "f1ef4534-2e70-4c47-9b37-34dc5d44a7ad",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "7ed8d8e7-1b95-4e4c-af1d-bb38c150efed",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/digital-pro-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "digital-pro-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c610a0dc-9236-47aa-a2f7-9c24f3be1e23",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 100,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "2ad6ad41-d9c8-478c-826c-d5f998efc1f7",
          "name": "Replace the Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"Change invoice was created\"] = data.subscription.invoices.total_items === 1;",
                  "tests[\"Invoice amount was pro-rated, subtotal: \" + data.subscription.invoices.data[0].subtotal] = data.subscription.invoices.data[0].subtotal < 100;",
                  "tests[\"Subscription has the added item\"] = _.find(data.subscription.items, function(item) {return item.item_id == 'digital-pro-sub.test'}) !== undefined;",
                  "tests[\"Subscription has the cancelled the other item\"] = _.find(data.subscription.items, function(item) {return item.item_id == 'digital-sub.test' && item.cancelled}) !== undefined;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"product_id\": \"digital-pro-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices&remove=digital-sub.test",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                },
                {
                  "key": "remove",
                  "value": "digital-sub.test",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "4b92862e-ed2d-4d4a-8898-0f7f6dcb498f",
          "name": "Get the Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// We should have three payments - two by credit card and one by customer account balance.",
                  "tests[\"Correct number of credit card payments\"] = _.filter(data.payments.data, function(payment) { return payment.payment_method.type == \"credit_card\"}).length === 2;",
                  "tests[\"Correct number of customer account balance payments\"] = _.filter(data.payments.data, function(payment) { return payment.payment_method.type == \"customer_account_balance\"}).length === 1;",
                  "tests[\"All payments are completed\"] = _.filter(data.payments.data, function(payment) { return payment.status == \"completed\"}).length === 3;",
                  "tests[\"Correct number of customer account balance refunds\"] = _.filter(data.refunds.data, function(refund) { return refund.payment_method.type == \"customer_account_balance\"}).length === 1;",
                  "tests[\"Correct number of total refunds\"] = data.refunds.total_items === 1;",
                  "tests[\"Refund total is within range\"] = data.refunds.data[0].total < 20;",
                  "tests[\"Correct number of subscriptions\"] = data.subscriptions.total_items === 1;",
                  "tests[\"Correct number of orders\"] = data.orders.total_items === 2;",
                  "tests[\"Correct number of invoices\"] = data.invoices.total_items === 1;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{customer_url}}?expand=refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
              "host": [
                "{{customer_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "0518e555-d37a-4371-9d0b-8870b59b02d4",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 40,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b12081da-34df-4041-a8af-a1799a0f5c21",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "65f7c45b-b100-4b52-8570-7281e574dbe1",
      "name": "Replace Item, Period End, Same Plan, Upgrade",
      "description": "",
      "item": [
        {
          "_postman_id": "83b2c8ea-d696-4eac-b2a2-7f1b88aa9795",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "5434ed09-03c5-4046-8873-9438f691c491",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "a7545592-e2e7-478a-89c0-f683c65d01db",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);",
                  "pm.globals.set(\"customer_url\", data.customer);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "57084893-863a-45b3-8656-10b9f3dfca9b",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "93091a5e-7b7f-4d99-a80f-0cf8ef13438f",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/digital-pro-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "digital-pro-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "65ca4c90-c9d2-484c-856a-f39a7cdd33b2",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 100,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "967d3b29-4be1-4334-b852-d87d52b10072",
          "name": "Replace the Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"No invoice was created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Subscription has the correct item pending\"] = data.subscription.items[0].replace_at_current_period_end.item_id === \"digital-pro-sub.test\";",
                  "tests[\"Pending item has the correct reference price\"] = data.subscription.items[0].replace_at_current_period_end.reference_price === 100;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"apply_at_period_end\": true,\n\t\"product_id\": \"digital-pro-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices&remove=digital-sub.test",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                },
                {
                  "key": "remove",
                  "value": "digital-sub.test",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c31b2a3c-1f98-49ff-8c5b-6610b37a5a77",
          "name": "Get the Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// We should have three payments - two by credit card and one by customer account balance.",
                  "tests[\"Correct number of total payments\"] = data.payments.total_items === 1;",
                  "tests[\"All payments are completed\"] = _.filter(data.payments.data, function(payment) { return payment.status == \"completed\"}).length === 1;",
                  "tests[\"Correct number of total refunds\"] = data.refunds.total_items === 0;",
                  "tests[\"Correct number of subscriptions\"] = data.subscriptions.total_items === 1;",
                  "tests[\"Correct number of orders\"] = data.orders.total_items === 1;",
                  "tests[\"Correct number of invoices\"] = data.invoices.total_items === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{customer_url}}?expand=refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
              "host": [
                "{{customer_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "c2bbb0c0-ef51-4da3-ac50-cd203f6e3349",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 40,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "e87b7c72-2a72-43d3-bf07-f057bc6b530e",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "6785ffd8-623a-4db6-941d-562ad4e49775",
      "name": "Replace Item, Immediate, Same Plan, Downgrade",
      "description": "",
      "item": [
        {
          "_postman_id": "e482d487-6d51-48f9-8771-ac39b9c20554",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "b75d730a-7d2b-49bf-aa48-c7e6af12943c",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "544b5637-92f5-4abb-83d1-a4162ef0780e",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);",
                  "pm.globals.set(\"customer_url\", data.customer);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "78d96430-dedd-480e-ba0b-0fd55dcea30a",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "7beb77a4-6917-462e-b7cb-c4c04e10f6ce",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/digital-pro-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "digital-pro-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "479de3df-f80d-4545-98c7-0199761aaac5",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 10,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "1e7419c7-a2ef-4b65-995f-4e366afdb947",
          "name": "Replace the Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"Change invoice was created\"] = data.subscription.invoices.total_items === 1;",
                  "tests[\"Invoice amount was pro-rated, subtotal: \" + data.subscription.invoices.data[0].subtotal] = data.subscription.invoices.data[0].subtotal < 100;",
                  "tests[\"Subscription has the added item\"] = _.find(data.subscription.items, function(item) {return item.item_id == 'digital-pro-sub.test'}) !== undefined;",
                  "tests[\"Subscription has the cancelled the other item\"] = _.find(data.subscription.items, function(item) {return item.item_id == 'digital-sub.test' && item.cancelled}) !== undefined;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"product_id\": \"digital-pro-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices&remove=digital-sub.test",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                },
                {
                  "key": "remove",
                  "value": "digital-sub.test",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "99dab75e-df97-438a-bb69-e99c38f9b397",
          "name": "Get the Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// We should have three payments - two by credit card and one by customer account balance.",
                  "tests[\"Correct number of credit card payments\"] = _.filter(data.payments.data, function(payment) { return payment.payment_method.type == \"credit_card\"}).length === 1;",
                  "tests[\"Correct number of customer account balance payments\"] = _.filter(data.payments.data, function(payment) { return payment.payment_method.type == \"customer_account_balance\"}).length === 1;",
                  "tests[\"All payments are completed\"] = _.filter(data.payments.data, function(payment) { return payment.status == \"completed\"}).length === 2;",
                  "tests[\"Correct number of customer account balance refunds\"] = _.filter(data.refunds.data, function(refund) { return refund.payment_method.type == \"customer_account_balance\"}).length === 1;",
                  "tests[\"Correct number of total refunds\"] = data.refunds.total_items === 2;",
                  "tests[\"Refund total is within range\"] = data.refunds.data[0].total + data.refunds.data[1].total < 20;",
                  "tests[\"Correct number of subscriptions\"] = data.subscriptions.total_items === 1;",
                  "tests[\"Correct number of orders\"] = data.orders.total_items === 2;",
                  "tests[\"Correct number of invoices\"] = data.invoices.total_items === 1;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{customer_url}}?expand=refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
              "host": [
                "{{customer_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "7f0482da-f0d5-488b-9035-b2fd95c0cb77",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 40,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "36f48a26-0dc3-4bce-900d-92462252db1f",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "5e7326af-2c74-46ed-b714-16e11c7c6e82",
      "name": "Replace Item, Period End, Same Plan, Downgrade",
      "description": "",
      "item": [
        {
          "_postman_id": "8cc9c5ef-183d-45cb-b5d3-77d2acdc44d0",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2e45bc1a-8ef7-4349-8712-acfbab72f23e",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);",
                  "pm.globals.set(\"item_total\", data.items[0].total);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital-sub.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/carts?expand=items.subscription_plan,items.subscription_terms",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "carts"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "items.subscription_plan,items.subscription_terms",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "6a0af3f6-ab14-4a0b-b127-93e5ae8901e6",
          "name": "Submit Cart Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 201\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.order.items[0];",
                  "tests[\"Subscription was created\"] === item.subcription !== null;",
                  "pm.globals.set(\"subscription_url\", item.subscription.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{cart_url}}/payments?expand=order.items.subscription",
              "host": [
                "{{cart_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order.items.subscription",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "5b6e18bb-f0db-48c4-bc86-aef9efaa1942",
          "name": "Get the Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "var item = data.items[0];",
                  "pm.globals.set(\"subscription_item\", item);",
                  "pm.globals.set(\"subscription_item_url\", item.url);",
                  "pm.globals.set(\"customer_url\", data.customer);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "2b3c510a-2e39-48cd-b2af-922a0293a92d",
          "name": "Wait 3 seconds",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a05ebd5c-7c23-42c3-9eb9-63ddde25ee85",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "var date = new Date();",
                  "var waitForMinutes = 7;",
                  "",
                  "tests[\"Waiting a few seconds to burn down subscription used time\"] = true;",
                  "",
                  "setTimeout(function() {",
                  "    tests[\"Timer completed. Testing resuming...\"] = true;",
                  "}, 3000);",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9751ab2a-b7c5-4e5c-9971-064d19f11c72",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "ca2aee69-cdca-45f6-8552-a930be9f3ce5",
          "name": "Get the Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"product_price\", data.price);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "https://{{host}}/api/v1/products/digital-pro-sub.test?currency=USD",
              "protocol": "https",
              "host": [
                "{{host}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "digital-pro-sub.test"
              ],
              "query": [
                {
                  "key": "currency",
                  "value": "USD",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "7c5590d5-eeb7-4d1d-8383-4a450ed8040f",
          "name": "Update Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 10,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "db694461-b07a-4980-ab8c-353bc4742517",
          "name": "Replace the Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// There should be one invoice and the total should be less than the item total",
                  "tests[\"No invoice was created\"] = data.subscription.invoices.total_items === 0;",
                  "tests[\"Subscription has the correct item pending\"] = data.subscription.items[0].replace_at_current_period_end.item_id === \"physical-sub.test\";",
                  "tests[\"Pending item has the correct reference price\"] = data.subscription.items[0].replace_at_current_period_end.reference_price === 10;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"apply_at_period_end\": true,\n\t\"product_id\": \"digital-pro-sub.test\"\n}"
            },
            "url": {
              "raw": "{{subscription_url}}/items?expand=subscription.invoices&remove=digital-sub.test",
              "host": [
                "{{subscription_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "subscription.invoices",
                  "equals": true
                },
                {
                  "key": "remove",
                  "value": "digital-sub.test",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "54d84c8d-4c56-4ffa-94a5-d03f85af914a",
          "name": "Get the Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "// We should have three payments - two by credit card and one by customer account balance.",
                  "tests[\"Correct number of total payments\"] = data.payments.total_items === 1;",
                  "tests[\"All payments are completed\"] = _.filter(data.payments.data, function(payment) { return payment.status == \"completed\"}).length === 1;",
                  "tests[\"Correct number of total refunds\"] = data.refunds.total_items === 0;",
                  "tests[\"Correct number of subscriptions\"] = data.subscriptions.total_items === 1;",
                  "tests[\"Correct number of orders\"] = data.orders.total_items === 1;",
                  "tests[\"Correct number of invoices\"] = data.invoices.total_items === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"payment_method\": {\r\n     \"save\": false,\r\n     \"type\": \"credit_card\",\r\n     \"data\": {\r\n         \"number\": \"4444555566661111\",\r\n         \"cvv\": 123,\r\n         \"exp_month\": 12,\r\n         \"exp_year\": 2025\r\n      }\r\n   }\r\n}"
            },
            "url": {
              "raw": "{{customer_url}}?expand=refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
              "host": [
                "{{customer_url}}"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.payment_method,payments.payment_method,subscriptions,invoices,orders",
                  "equals": true
                }
              ]
            },
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "d1c1a0fc-ab57-4874-b7ab-eed04e4be924",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subscription_plan_id\": \"{{five_minute_subscription_with_trial_plan_id}}\",\n    \"prices\": [\n        {\n            \"price\": 40,\n            \"currency\": \"USD\"\n        }\n    ]\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-pro-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "3d1c2432-c824-41e3-9e55-9fa3dc23864f",
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "30ae10f7-5785-4af0-a0cf-fb1fbdf0cc25",
                "exec": [
                  "tests[\"Subscription cancelled successfully\"] = responseCode.code === 200;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Subscription cancellation confirmed\"] = data.status === \"cancelled\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n   \"status\":\"cancelled\",\r\n   \"cancellation_reason\": \"Cancelled upon completion of an automated test\"\r\n}"
            },
            "url": "{{subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "f7b781c5-11db-4f0e-934c-a037517f64a9",
      "name": "Post-request Cleanup",
      "description": "",
      "item": [
        {
          "_postman_id": "4de380bd-d6e7-466e-884b-ed656fa3dffb",
          "name": "Enable Order Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "93d9883a-b85b-4c50-b0be-0e8a981265c4",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Order email notifications have been enabled\"] = responseCode.code === 200;"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{order_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "f3f10b99-370b-4ab6-b474-f0d33e648194",
          "name": "Enable Payment Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "92ba83da-5fd8-40c6-af75-0bdd3dca901c",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been enabled\"] = responseCode.code === 200;",
                  "",
                  "pm.globals.unset(\"order_confirmation_subscription_url\");",
                  "pm.globals.unset(\"payment_confirmation_subscription_url\");",
                  "pm.globals.unset(\"cart_url\");",
                  "pm.globals.unset(\"subscription_plan\");",
                  "pm.globals.unset(\"subscription_terms\");",
                  "pm.globals.unset(\"subscription_url\");",
                  "pm.globals.unset(\"coupon_url\");",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{payment_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "10e3c58c-cfa2-49b7-9cd0-f1d0ef16cd44",
          "name": "Enable Refund Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "92ba83da-5fd8-40c6-af75-0bdd3dca901c",
                "exec": [
                  "tests[\"Refund email notifications have been enabled\"] = responseCode.code === 200;",
                  "",
                  "pm.globals.unset(\"order_confirmation_subscription_url\");",
                  "pm.globals.unset(\"payment_confirmation_subscription_url\");",
                  "pm.globals.unset(\"refund_confirmation_subscription_url\");",
                  "pm.globals.unset(\"cart_url\");",
                  "pm.globals.unset(\"subscription_plan\");",
                  "pm.globals.unset(\"subscription_terms\");",
                  "pm.globals.unset(\"subscription_url\");",
                  "pm.globals.unset(\"coupon_url\");",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{refund_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "26d5bdb3-8624-4fd5-8377-2280733c021e",
          "name": "Get Subscription Plans",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Get subscription plans\"] = responseCode.code === 200;",
                  "",
                  "var list = JSON.parse(responseBody);",
                  "var data = list.data;",
                  "",
                  "data.forEach(function(item) {",
                  "    if (item.billing_interval_unit === \"hour\" && item.trial_interval_unit === null) {",
                  "        pm.globals.set(\"hour_subscription_plan_id\", item.subscription_plan_id);",
                  "        console.log(item.name);",
                  "        console.log(pm.globals.get(\"hour_subscription_plan_id\"));",
                  "    }",
                  "        if (item.billing_interval_unit === \"hour\" && item.trial_interval_unit === \"hour\") {",
                  "        pm.globals.set(\"hour_subscription_with_trial_plan_id\", item.subscription_plan_id);",
                  "        console.log(item.name);",
                  "        console.log(pm.globals.get(\"hour_subscription_with_trial_plan_id\"));",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{host}}/api/v1/subscription_plans",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "a495a543-84f0-4409-964d-40af4234c23b",
          "name": "Revert Product Subscription Plan (Digital)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{hour_subscription_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/digital-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "d031ef1d-d65b-43c9-a4f7-ec312590c2c9",
          "name": "Revert Product Subscription Plan (Physical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a7f20a52-80fb-4c20-a8d5-e7c404517d70",
                "exec": [
                  "tests[\"Updated subscription plan\"] = responseCode.code === 200;"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "812a60fa-cc92-46a0-914d-6599430f5976",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"subscription_plan_id\": \"{{hour_subscription_with_trial_plan_id}}\"   \r\n}"
            },
            "url": "https://{{host}}/api/v1/products/physical-sub.test",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "d900d853-31a8-46bd-8a5f-0ed7dfdc62a3",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "7289bc1c-fd7d-4d5c-aa90-73ca4b2a8487",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "785fe205-4ba4-4ba8-8552-f26a2699d7b6",
      "key": "name",
      "value": "James Smith",
      "type": "string",
      "description": ""
    },
    {
      "id": "9bcf31a7-77b7-447f-ac5b-b95c6dddc327",
      "key": "address_1",
      "value": "678 Broad St",
      "type": "string",
      "description": ""
    },
    {
      "id": "470bb684-4f1d-42b2-915a-8336662cecc3",
      "key": "city",
      "value": "Westerville",
      "type": "string",
      "description": ""
    },
    {
      "id": "1ad348b1-05b4-4e75-a8f7-dbca4caa83da",
      "key": "state_prov",
      "value": "OH",
      "type": "string",
      "description": ""
    },
    {
      "id": "870be1a4-9041-47f9-94ee-e396c08808d5",
      "key": "postal_code",
      "value": "43081",
      "type": "string",
      "description": ""
    },
    {
      "id": "eacfaa74-af29-415b-be95-5548956679e2",
      "key": "country",
      "value": "US",
      "type": "string",
      "description": ""
    },
    {
      "id": "8af3e05a-7843-4f9b-9efe-30be8dff7d7d",
      "key": "phone",
      "value": "614-555-0191",
      "type": "string",
      "description": ""
    },
    {
      "id": "2807c831-33b0-4abc-8397-86ed3db6e8a4",
      "key": "product_id",
      "value": "physical-sub.test",
      "type": "string",
      "description": ""
    }
  ]
}