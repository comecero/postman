{
  "info": {
    "_postman_id": "5f8b04cb-56ab-404b-a278-be5f32135315",
    "name": "Refunds",
    "description": "- This set of tests expects you to be using the Base Account.\n\nTests creation of refunds in various scenarios.",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "60ac07b8-fe67-4652-ab82-ddd3907ab9d1",
      "name": "Pre-request Configurations",
      "description": "",
      "item": [
        {
          "_postman_id": "c45b703f-34a2-4e9d-aacf-fb5400bba520",
          "name": "Disable Duplicate Payment Checker",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "82452e4c-9550-4daa-8063-f5b84f40aee0",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"duplicate_payment_timeout\": 0\n}"
            },
            "url": "https://{{host}}/api/v1/settings/payment",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "878f9fa6-7bda-47a6-a2ad-e7e7730f757a",
          "name": "Get Notification Subscriptions",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2592e172-faa2-4ba6-b188-29c9626dc738",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status is 200\"] = responseCode.code === 200;",
                  "",
                  "// Find the payment, order notification subscriptions",
                  "var notifications = JSON.parse(responseBody);",
                  "var list = notifications.data;",
                  "",
                  "_.each(list, function(item) {",
                  "    ",
                  "    if (item.type === \"order:confirmation\")",
                  "        pm.globals.set(\"order_confirmation_subscription_url\", item.url);",
                  "        ",
                  "            if (item.type === \"payment:confirmation\")",
                  "        pm.globals.set(\"payment_confirmation_subscription_url\", item.url);",
                  "        ",
                  "            if (item.type === \"refund:confirmation\")",
                  "        pm.globals.set(\"refund_confirmation_subscription_url\", item.url);        ",
                  "    ",
                  "});",
                  "",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"promotion_code\": \"{{promotion_code}}\",\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"{{product_id}}\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": "https://{{host}}/api/v1/notification_subscriptions",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "33ccc4eb-0166-4842-a906-a4abec9d13e4",
          "name": "Disable Order Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ec320aec-60a1-416a-8184-2ebe91db1f38",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Order email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{order_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "efdb5aaa-4982-4e49-91c3-f9eac20b7302",
          "name": "Disable Payment Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "82452e4c-9550-4daa-8063-f5b84f40aee0",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{payment_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "ecbc5724-06a6-4fe0-a574-2e9c0cc8ae4b",
          "name": "Disable Refund Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "5de69872-771e-4fc8-8bc0-76c002663061",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Refund email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": false\n}"
            },
            "url": "{{refund_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "db236e77-f986-4125-b356-5008a2e559a8",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "fa8477f9-7918-46af-8244-edb14f473d45",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "_postman_id": "5a88c7b8-aa51-4bc8-8512-5d89fd34dfd8",
      "name": "Direct Payment, Full Refund",
      "description": "",
      "item": [
        {
          "_postman_id": "0a4c9e0d-e5d3-4b72-a374-0763b7a682fb",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "1602c26c-4210-47d2-ada1-2e1061a5de8e",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fad07258-c4a3-4be0-b3bf-bba6e878a177",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 100 && data.subtotal === 100;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "02345c04-b0c7-4611-b181-821a0af032fa",
      "name": "Direct Payment, With Shipping",
      "description": "",
      "item": [
        {
          "_postman_id": "76622758-0ee0-41b9-a4fb-8eec21053b66",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"shipping\": 10,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "065b0c3d-09b4-44ab-aa20-ba307eb74553",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "63700591-fe09-430e-92cf-c8b7daa1c6e8",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.shipping === 10 && data.total === 10;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"shipping\": 10\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "29b9b343-1531-4bc2-8875-603b1d29f67a",
      "name": "Direct Payment, With Tax",
      "description": "",
      "item": [
        {
          "_postman_id": "babd8876-b5c8-4b72-a4fd-67343562d6d6",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"shipping\": 10,\n   \"tax\": 5,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "53c961de-64b2-4a19-9fe4-a959051aa4bc",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "76b8a95b-bf9a-4d1b-8810-1a664aa5ae64",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.tax === 5 && data.total === 5 && data.subtotal === 0;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"tax\": 5\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "7404d8fa-2fc2-4fa2-b529-4bc67202818b",
      "name": "Direct Payment, Calculate Tax",
      "description": "",
      "item": [
        {
          "_postman_id": "af492d50-2fd3-4a0a-8ee5-5b575c641d97",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 130,\n   \"shipping\": 20,\n   \"tax\": 10,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2023,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "cdb5c3d5-65c5-4db7-aa18-d1a069295e1f",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "c90e7a31-b9de-4b51-b720-a829f5f44263",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.tax === 5 && data.shipping === 10 && data.total === 65;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 65\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "3974d87a-e592-4fbf-9c7a-f101cd52411f",
      "name": "Direct Payment, With Amounts More Than Original",
      "description": "",
      "item": [
        {
          "_postman_id": "c7a727e8-47b9-45f4-a8bd-eafeb1069892",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"shipping\": 10,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "9118c6cd-52b0-40d1-94bb-548ad0b942a3",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "86a0ad52-b928-4f55-ad55-db82a00b1413",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Check that you can't submit more than the original shipping amount\"] = responseCode.code === 400;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"shipping\": 12\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "74fc263e-2491-4a33-97b1-4d1d7d5f93b0",
      "name": "Direct Payment, Partial Refunds",
      "description": "",
      "item": [
        {
          "_postman_id": "1a2d9b2a-54d3-4cfa-804b-7956b7ae42bb",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "791e2f91-fcc6-45ac-8a0f-99a1f3bb0e00",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3c71742a-d648-4a47-8acf-1ea1c2532396",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 20 && data.subtotal === 20 && data.tax === 0 && data.shipping === 0;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 20\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "f99adf16-64ab-4853-a4ad-7b2e2261c380",
          "name": "Submit Refund Remainder",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "5361b40a-232b-4889-8baf-395964d88183",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 80 && data.subtotal === 80 && data.shipping === 0 && data.tax === 0;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "b08a8012-6119-4175-8085-4b4b5563803d",
      "name": "Direct Payment, More Than Payment",
      "description": "",
      "item": [
        {
          "_postman_id": "dbeece8d-a0ae-448a-b204-7be3eaa144c6",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "5439072e-de80-4924-9a46-a71af48325d5",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8e81082b-a914-453a-a3d5-49626b34b8b8",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Check that you can't submit more than the original payment amount\"] = responseCode.code === 400;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 110\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "e73c8ded-5650-48c7-8a0e-c82f8b8aea34",
      "name": "Direct Payment, More Than Payment w/ Partials",
      "description": "",
      "item": [
        {
          "_postman_id": "ec538ebd-37e6-438e-80dd-ad5a9f166554",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"payment_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 100,\n   \"currency\": \"USD\",\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "https://{{host}}/api/v1/payments"
          },
          "response": []
        },
        {
          "_postman_id": "202c84b9-a1fc-4883-83ce-c951b5881b8e",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b51494b7-f0bc-414f-b37b-26637f44bc4f",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 20;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 20\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "0b6c9776-b55e-4deb-b121-58c1def28ccc",
          "name": "Submit Refund More than Original",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8e81082b-a914-453a-a3d5-49626b34b8b8",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Check that you can't submit more than the original payment amount\"] = responseCode.code === 400;"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 90\n}"
            },
            "url": "{{payment_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "dcfdf4f7-f892-4cf9-947d-8dcce2de1b37",
      "name": "From Order, Full Refund",
      "description": "",
      "item": [
        {
          "_postman_id": "a4e4c148-c59a-47c0-9c5e-5299884d9852",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "f746f38a-fe61-4b97-8be4-226f393d6761",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "29c7cafc-9bcd-4c26-8706-3bdd71cab7e8",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "466c1548-eabb-4a62-96f5-df16d621b469",
                "exec": [
                  "tests[\"Refund created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 100 && data.subtotal === 90 && data.shipping === 10 && data.tax === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "06a1bf42-46c5-47ba-9413-c5ad4b9e174c",
      "name": "From Order, Partial Refunds",
      "description": "",
      "item": [
        {
          "_postman_id": "057641d5-9926-4d8d-b699-d109ce3624d1",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "0657db45-45b9-48ee-bd11-6a9a61d59d65",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "c0af8134-aad9-4360-96b2-43e6885a5d86",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ebc31667-fb7a-414b-a260-017a2d2bfc29",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 20 && data.shipping === 2 && data.subtotal === 18 && data.tax === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 20\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "0a179e8c-140d-46f6-a651-cc62fb072ad3",
          "name": "Submit Refund Remainder",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0ee4a4dc-9a73-4fa7-aa7d-e2b06d0b3e0b",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 80 && data.subtotal === 72 && data.shipping === 8 && data.tax === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 80\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "21209e77-7960-454f-bd7f-3903a1497923",
      "name": "From Order, Refund Items",
      "description": "",
      "item": [
        {
          "_postman_id": "3b4ee9e7-c070-41ea-84f9-6e13b7d6f861",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "f182add8-53a6-47e1-b387-d7d4a9e03571",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "69223b3d-2749-4111-90b9-aacdc2a97653",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ec1490a0-afff-49ef-8749-f5d7362f8bda",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 90 && data.subtotal === 90 && data.shipping === 0 && data.tax === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"items\":[\n      {\n         \"item_id\":\"digital.test\",\n         \"quantity\":3\n      },   \t\n      {\n         \"item_id\":\"physical.test\",\n         \"quantity\":2\n      }        \n   ]\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "e18094d1-7e9a-4569-9af6-b9edb3bd86f3",
      "name": "From Order, Refund Items, More Than Order",
      "description": "",
      "item": [
        {
          "_postman_id": "8820fb1e-2075-447e-846c-464196acd080",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "852d5eb8-012a-44e1-999d-0db44b9a50ba",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "6c477ab5-150b-47cb-a0f2-90cd6c3b1839",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "88962220-a52d-40b0-8b9b-88edceef1deb",
                "exec": [
                  "tests[\"Check refunding more items that in order\"] = responseCode.code === 400;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"items\":[\n      {\n         \"item_id\":\"digital.test\",\n         \"quantity\":4\n      },   \t\n      {\n         \"item_id\":\"physical.test\",\n         \"quantity\":2\n      }        \n   ]\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "ed12715b-0224-4ad4-ba2a-85cc759bdcbe",
      "name": "From Order, Refund Items, More Than Order w/ Partials",
      "description": "",
      "item": [
        {
          "_postman_id": "a07c323f-43b4-4e67-8b9e-f9567b0baec4",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "bb6fdb2c-cae9-47e9-a73d-6bb8c5314579",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "b38a81ef-3921-4e4d-b131-dbac6ab0ef02",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b96552fc-b8d6-4837-83bc-6f4ffae7fff6",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 40;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"items\":[\n      {\n         \"item_id\":\"digital.test\",\n         \"quantity\":1\n      },   \t\n      {\n         \"item_id\":\"physical.test\",\n         \"quantity\":1\n      }        \n   ]\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "4c573294-6e79-4d94-b8df-d8cc7210cfca",
          "name": "Submit Refund More Than Original",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8e779a5f-cc28-4b8c-9535-04f7c7f7a066",
                "exec": [
                  "tests[\"Check refunding more items that in order with partial refund\"] = responseCode.code === 400;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"items\":[\n      {\n         \"item_id\":\"digital.test\",\n         \"quantity\":3\n      }       \n   ]\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "36c357a2-af0d-47a0-9192-fc624c2a3260",
      "name": "From Order, Refund Items with Shipping",
      "description": "",
      "item": [
        {
          "_postman_id": "cc8d7d89-de81-4c67-ad61-2e3031d6cbb0",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "36cf1f98-f7b5-4808-9200-a7c682c38a5a",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "9751edcb-6dce-421d-a6e1-fa2ffa1eaae1",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0f1028eb-5704-49b2-a602-637a8d2f1cb3",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 100 && data.subtotal === 90 && data.shipping === 10 && data.tax === 0;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping\": 10,\n   \"items\":[\n      {\n         \"item_id\":\"digital.test\",\n         \"quantity\":3\n      },   \t\n      {\n         \"item_id\":\"physical.test\",\n         \"quantity\":2\n      }       \n   ]\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "83b00a3d-ff23-4502-985a-472d685dcc8f",
      "name": "From Order, Shipping Only",
      "description": "",
      "item": [
        {
          "_postman_id": "54b02e18-d239-4ef9-b84d-cbc4472b0e65",
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"cart_url\", data.url);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/carts"
          },
          "response": []
        },
        {
          "_postman_id": "086e3e6e-b117-406a-8c1b-309a5fa3f238",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{cart_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "504b8b1e-eaf9-43e8-b782-82842ef4b3cc",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "cea79572-2d85-4038-915f-7d0b4cac258a",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 10 && data.shipping === 10;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping\": 10\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "8107c389-274b-488b-a5bf-d3e2f3d2178b",
      "name": "From Order, Multiple Payments",
      "description": "",
      "item": [
        {
          "_postman_id": "66c69844-16f2-4ada-8009-df559fd82e4e",
          "name": "Create Invoice",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f73e074e-0051-4e94-82f4-e0517427cadc",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Invoice created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Total is OK\"] = data.total === 45;",
                  "tests[\"Item count is OK\"] = data.items_count === data.items.length && data.items_count === 2;",
                  "pm.globals.set(\"invoice_url\", data.url);"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4953e1ce-d1dd-48de-af8f-1305445dc4e8",
                "type": "text/javascript",
                "exec": [
                  "var date = new Date();",
                  "date.setMonth(date.getMonth() + 1);",
                  "pm.globals.set(\"date_due\", date.toISOString().substring(0, 10));"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"date_due\": \"{{date_due}}\",\r\n  \"draft\": false,\r\n  \"suppress_customer_notification\": true,\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":1\r\n      },\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": "https://{{host}}/api/v1/invoices"
          },
          "response": []
        },
        {
          "_postman_id": "16762c35-3f1a-4782-b202-c2ae5c8e4a17",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Status is pending\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 5;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"total\": 5,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "bb6917a1-005b-4cef-ac23-aae1419c7f55",
          "name": "Create Failed Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment failed\"] = responseCode.code === 402;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Status is pending\"] = data.error.meta.payment.status === \"failed\";",
                  "tests[\"Total is OK\"] = data.error.meta.payment.total === 15;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"total\": 15,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566669999\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "52d7ff91-70fd-4f29-82f9-79a983ba11cc",
          "name": "Create Payment (Remainder)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order.url);",
                  "pm.globals.set(\"order_total\", data.order.total);",
                  "",
                  "tests[\"Status is pending\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 40;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": {
              "raw": "{{invoice_url}}/payments?expand=order",
              "host": [
                "{{invoice_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "3a08910d-d755-419c-9e52-8a8d24de75e1",
          "name": "Refund Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Capture request created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refunds were successful\"] = data.success_count === 2;",
                  "tests[\"Correct number of refunds processed\"] = data.refunds.length === 2;",
                  "tests[\"Correct amount was refunded \" + pm.globals.get(\"order_total\")] = pm.globals.get(\"order_total\") === data.total;",
                  "",
                  "tests[\"Refunds processed in the correct order\"] === data.refunds[0].total > data.refunds[1].total;",
                  "",
                  "tests[\"Refund status is OK\"] = data.refunds[0].status === \"completed\";",
                  "tests[\"Refund 2 status is OK\"] = data.refunds[1].status === \"completed\";",
                  "tests[\"Order status is OK\"] = data.refunds[0].order.payment_status === \"refunded\";",
                  "tests[\"Invoice status is OK\"] = data.refunds[0].invoice.payment_status === \"refunded\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{order_url}}/refunds?expand=refunds.order,refunds.invoice",
              "host": [
                "{{order_url}}"
              ],
              "path": [
                "refunds"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.order,refunds.invoice",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "02ca3c83-6c10-45fc-a7a5-d0a7a597091d",
      "name": "From Order, Multiple Payments, Refund Failure",
      "description": "",
      "item": [
        {
          "_postman_id": "58f9678b-cec7-4820-9b0c-21369807a407",
          "name": "Create Invoice",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f73e074e-0051-4e94-82f4-e0517427cadc",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Invoice created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Total is OK\"] = data.total === 45;",
                  "tests[\"Item count is OK\"] = data.items_count === data.items.length && data.items_count === 2;",
                  "pm.globals.set(\"invoice_url\", data.url);"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4953e1ce-d1dd-48de-af8f-1305445dc4e8",
                "type": "text/javascript",
                "exec": [
                  "var date = new Date();",
                  "date.setMonth(date.getMonth() + 1);",
                  "pm.globals.set(\"date_due\", date.toISOString().substring(0, 10));"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"date_due\": \"{{date_due}}\",\r\n  \"draft\": false,\r\n  \"suppress_customer_notification\": true,\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":1\r\n      },\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": "https://{{host}}/api/v1/invoices"
          },
          "response": []
        },
        {
          "_postman_id": "a60c109f-0b08-43aa-87fb-e162d4142b85",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Status is OK\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 5;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"total\": 5,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "af5b5d7f-21cb-4aaa-bd02-e092de918178",
          "name": "Create Payment (Remainder)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order.url);",
                  "pm.globals.set(\"order_total\", data.order.total);",
                  "",
                  "tests[\"Status is OK\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 40;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661152\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": {
              "raw": "{{invoice_url}}/payments?expand=order",
              "host": [
                "{{invoice_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "970ce9d7-db1f-4fd8-b777-76338df88d7d",
          "name": "Refund Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Refund request created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund were successful\"] = data.success_count === 1;",
                  "tests[\"Correct number of refunds attempted\"] = data.refunds.length === 2;",
                  "tests[\"Correct amount was refunded\"] = data.total === 5;",
                  "",
                  "tests[\"Refunds processed in the correct order\"] === data.refunds[0].total > data.refunds[1].total;",
                  "",
                  "tests[\"Refund status is OK\"] = data.refunds[0].status === \"failed\";",
                  "tests[\"Refund 2 status is OK\"] = data.refunds[1].status === \"completed\";",
                  "tests[\"Order status is OK\"] = data.refunds[0].order.payment_status === \"completed\";",
                  "tests[\"Invoice status is OK\"] = data.refunds[0].invoice.payment_status === \"completed\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{order_url}}/refunds?expand=refunds.order,refunds.invoice",
              "host": [
                "{{order_url}}"
              ],
              "path": [
                "refunds"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.order,refunds.invoice",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "513e677b-5246-4d07-ada5-ed531384f28c",
      "name": "From Order, Multiple Payments, Pending",
      "description": "",
      "item": [
        {
          "_postman_id": "86e36bd9-a0bc-4bf4-8493-d8e0a7ddd68f",
          "name": "Create Invoice",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f73e074e-0051-4e94-82f4-e0517427cadc",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Invoice created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Total is OK\"] = data.total === 45;",
                  "tests[\"Item count is OK\"] = data.items_count === data.items.length && data.items_count === 2;",
                  "pm.globals.set(\"invoice_url\", data.url);"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4953e1ce-d1dd-48de-af8f-1305445dc4e8",
                "type": "text/javascript",
                "exec": [
                  "var date = new Date();",
                  "date.setMonth(date.getMonth() + 1);",
                  "pm.globals.set(\"date_due\", date.toISOString().substring(0, 10));"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"date_due\": \"{{date_due}}\",\r\n  \"draft\": false,\r\n  \"suppress_customer_notification\": true,\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":1\r\n      },\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":1\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }   \r\n}"
            },
            "url": "https://{{host}}/api/v1/invoices"
          },
          "response": []
        },
        {
          "_postman_id": "b4f9779f-dee3-46a0-acf4-4957efcbfbe2",
          "name": "Create Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Status is OK\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 5;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"total\": 5,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "90f5b9fb-a9b7-43f0-b1ae-1b8ab37f5af7",
          "name": "Create Payment (Pending)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Status is OK\"] = data.status === \"pending\";",
                  "tests[\"Total is OK\"] = data.total === 10;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": false,\n   \"total\": 10,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "56b50cd1-b202-4753-853b-63f860a27a2b",
          "name": "Create Payment (Remainder)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"order_url\", data.order.url);",
                  "pm.globals.set(\"order_total\", data.order.total);",
                  "",
                  "tests[\"Status is OK\"] = data.status === \"completed\";",
                  "tests[\"Total is OK\"] = data.total === 30;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,\n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": {
              "raw": "{{invoice_url}}/payments?expand=order",
              "host": [
                "{{invoice_url}}"
              ],
              "path": [
                "payments"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "order",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "76a4fae6-125d-47dd-96c6-8f1a8d8df3a1",
          "name": "Refund Order (Overflow)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Refund more than captured total\"] = responseCode.code === 400;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 45\n}"
            },
            "url": {
              "raw": "{{order_url}}/refunds?expand=refunds.order,refunds.invoice",
              "host": [
                "{{order_url}}"
              ],
              "path": [
                "refunds"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.order,refunds.invoice",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "192c63dc-c372-4c97-975f-31cf9f4f1cea",
          "name": "Refund Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Refund request created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refunds were successful\"] = data.success_count === 2;",
                  "tests[\"Correct number of refunds processed\"] = data.refunds.length === 2;",
                  "tests[\"Correct amount was refunded\"] = data.total === 35;",
                  "",
                  "tests[\"Refunds processed in the correct order\"] === data.refunds[0].total > data.refunds[1].total;",
                  "",
                  "tests[\"Refund status is OK\"] = data.refunds[0].status === \"completed\";",
                  "tests[\"Refund 2 status is OK\"] = data.refunds[1].status === \"completed\";",
                  "tests[\"Order status is OK\"] = data.refunds[0].order.payment_status === \"pending\";",
                  "tests[\"Invoice status is OK\"] = data.refunds[0].invoice.payment_status === \"pending\";"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{order_url}}/refunds?expand=refunds.order,refunds.invoice",
              "host": [
                "{{order_url}}"
              ],
              "path": [
                "refunds"
              ],
              "query": [
                {
                  "key": "expand",
                  "value": "refunds.order,refunds.invoice",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "a18fd47b-6486-49f8-9604-52599c55bb81",
      "name": "From Order, Mixture of Payment Statuses",
      "description": "",
      "item": [
        {
          "_postman_id": "6a2ce46a-9657-400c-a902-ee2f2b44ad9e",
          "name": "Create Invoice",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3a0eecbc-a75e-4942-a4bf-2ee73fe61f21",
                "exec": [
                  "tests[\"Cart created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "pm.globals.set(\"invoice_url\", data.url);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"date_due\": \"{{date_due}}\",\r\n  \"draft\": false,\r\n  \"suppress_customer_notification\": true,\t\r\n  \"currency\": \"USD\",\r\n   \"items\":[\r\n      {\r\n         \"product_id\":\"digital.test\",\r\n         \"quantity\":3\r\n      },   \t\r\n      {\r\n         \"product_id\":\"physical.test\",\r\n         \"quantity\":2\r\n      }        \r\n   ],\r\n  \"customer\": {\r\n    \"name\": \"{{name}}\",\r\n    \"email\": \"{{email}}\",\r\n    \"billing_address\": {\r\n        \"address_1\": \"{{address_1}}\",\r\n        \"city\": \"{{city}}\",\r\n        \"state_prov\": \"{{state_prov}}\",\r\n        \"postal_code\": \"{{postal_code}}\",\r\n        \"country\": \"{{country}}\"\r\n    }   \r\n  }\r\n}"
            },
            "url": "https://{{host}}/api/v1/invoices"
          },
          "response": []
        },
        {
          "_postman_id": "18f64238-8345-4a7a-8375-c26ca4e331c4",
          "name": "Partial Payment (Success, Capture)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Total is OK\"] = data.total === 15;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 15,\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "93328a64-78aa-4a73-8d22-ffcda58c1668",
          "name": "Partial Payment (Success, No Capture)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Total is OK\"] = data.total === 20;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 20,\n    \"capture\": false,\n    \"payment_method\": {\n        \"save\": true,\n        \"type\": \"credit_card\",\n        \"data\": {\n            \"number\": \"4444555566661111\",\n            \"cvv\": 123,\n            \"exp_month\": 12,\n            \"exp_year\": 2022,\n            \"cardholder_name\": \"{{name}}\",\n            \"billing_address\": {\n                \"address_1\": \"{{address_1}}.\",\n                \"city\": \"{{city}}\",\n                \"state_prov\": \"{{state_prov}}\",\n                \"postal_code\": \"{{postal_code}}\",\n                \"country\": \"{{country}}\"\n            }\n        }\n    }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "aeb093f3-382e-4603-ae7b-5391d8ce6054",
          "name": "Partial Payment (Fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment failed\"] = responseCode.code === 402;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"total\": 35,\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566669999\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "b6caee0d-4b97-44b0-abbc-ec6b7368ee9f",
          "name": "Remainder Payment (Success, Capture)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6e193edc-602f-4356-8557-fd2cbb35b887",
                "exec": [
                  "tests[\"Payment created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "tests[\"Total is OK\"] = data.total === 65;",
                  "pm.globals.set(\"order_url\", data.order);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"capture\": true,    \n   \"payment_method\":{\n     \"save\": true,\n     \"type\": \"credit_card\",\n      \"data\":{\n         \"number\":\"4444555566661111\",\n         \"cvv\":123,\n         \"exp_month\":12,\n         \"exp_year\":2022,\n         \"cardholder_name\":\"{{name}}\",\n         \"billing_address\":{\n            \"address_1\":\"{{address_1}}.\",\n            \"city\":\"{{city}}\",\n            \"state_prov\":\"{{state_prov}}\",\n            \"postal_code\":\"{{postal_code}}\",\n            \"country\":\"{{country}}\"\n         }\n      }\n   }\n}"
            },
            "url": "{{invoice_url}}/payments"
          },
          "response": []
        },
        {
          "_postman_id": "fdb555a3-0e49-4fbe-9dba-ff1ad9edb7f0",
          "name": "Submit Refund",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "466c1548-eabb-4a62-96f5-df16d621b469",
                "exec": [
                  "tests[\"Refund created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 70;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 70\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "b8a57a37-0034-4090-aee4-be8f53bc15ad",
          "name": "Submit Refund (Overflow)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "466c1548-eabb-4a62-96f5-df16d621b469",
                "exec": [
                  "tests[\"Refund failed\"] = responseCode.code === 400;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 31\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        },
        {
          "_postman_id": "e31feab2-365e-4dd5-99cf-0543c331c3c5",
          "name": "Submit Refund (Remainder)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "466c1548-eabb-4a62-96f5-df16d621b469",
                "exec": [
                  "tests[\"Refund created successfully\"] = responseCode.code === 201;",
                  "var data = JSON.parse(responseBody);",
                  "",
                  "tests[\"Refund was successful\"] = data.total === 70;"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"total\": 70\n}"
            },
            "url": "{{order_url}}/refunds"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "94a42b9f-5156-4ba1-af0d-017fee50f55a",
      "name": "Post-request Cleanup",
      "description": "",
      "item": [
        {
          "_postman_id": "eb942784-a8de-4ae6-b4e7-4ea57720b405",
          "name": "Enable Duplicate Payment Checker",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "82452e4c-9550-4daa-8063-f5b84f40aee0",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been disabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"duplicate_payment_timeout\": 120\n}"
            },
            "url": "https://{{host}}/api/v1/settings/payment",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "d0a0d472-93d2-4b18-b3ea-89249d841310",
          "name": "Enable Order Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "930c5570-6aa0-4d4d-8d90-448b23b70c0e",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Order email notifications have been enabled\"] = responseCode.code === 200;"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{order_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "17a20ac9-d78c-4848-9e27-3a55ba22b6a2",
          "name": "Enable Payment Notification Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f416fa82-c105-4be9-a221-b1ddfb31e205",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been enabled\"] = responseCode.code === 200;",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{payment_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        },
        {
          "_postman_id": "ae24805c-529f-46a0-a4ee-72937413b1be",
          "name": "Enable Refund Notification Subscription Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0f0314b8-4191-4fe3-abd2-0fba509ce142",
                "type": "text/javascript",
                "exec": [
                  "tests[\"Payment email notifications have been enabled\"] = responseCode.code === 200;",
                  "pm.globals.unset(\"payment_url\");",
                  "pm.globals.unset(\"cart_url\");",
                  "pm.globals.unset(\"order_confirmation_subscription_url\");",
                  "pm.globals.unset(\"payment_confirmation_subscription_url\");",
                  "pm.globals.unset(\"refund_confirmation_subscription_url\");",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "aba03a74-55f6-4b4f-9ff9-e0e92a9f735a",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n\t\"active\": true\n}"
            },
            "url": "{{refund_confirmation_subscription_url}}",
            "description": "- This set of tests expects you to use the [Customer Data Subscriptions](https://docs.google.com/spreadsheets/d/14wnj6iScmBw6jANOGR4Ki71uVzn5dZgE0KFAGEbz6LI/edit#gid=0) data collection in the runner.\n- This set of tests expects you to be using the Base Account."
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "e38a0227-2a65-4525-b4df-605b0407f9f1",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "8ddd01dd-1386-4596-a0dc-b4c1be5962cd",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "debf3c1a-1249-4254-9513-eb5dbbbe6e64",
      "key": "name",
      "value": "James Smith",
      "type": "string",
      "description": ""
    },
    {
      "id": "02def6c0-6e53-4d7a-b894-f2c63a012395",
      "key": "address_1",
      "value": "648 Broad St",
      "type": "string",
      "description": ""
    },
    {
      "id": "824657ad-e078-4ec5-a5a0-2d350f4fdb2b",
      "key": "city",
      "value": "Westerville",
      "type": "string",
      "description": ""
    },
    {
      "id": "d5a76931-56ad-4371-b983-870b69e0b28e",
      "key": "state_prov",
      "value": "OH",
      "type": "string",
      "description": ""
    },
    {
      "id": "fdfa34ff-e4cc-47f7-8be4-700cdfbd6346",
      "key": "postal_code",
      "value": "43081",
      "type": "string",
      "description": ""
    },
    {
      "id": "03604d0c-d6a4-413e-b550-16bdfd691fcb",
      "key": "country",
      "value": "US",
      "type": "string",
      "description": ""
    },
    {
      "id": "4be66c8a-ac26-4ee4-a3e5-1d42f161cd14",
      "key": "phone",
      "value": "614-555-0191",
      "type": "string",
      "description": ""
    }
  ]
}